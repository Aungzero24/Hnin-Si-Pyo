<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hnin Si PYo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root {
      --main: #f8b6d2;
      --accent: #ff7eb9;
      --bg: #f7f7fa;
      --nav: #fce4ec;
      --nav-active: #ff7eb9;
      --text: #39324a;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      background: linear-gradient(90deg, var(--main), var(--accent) 80%);
      color: #fff;
      text-align: center;
      padding: 28px 0 18px 0;
      font-size: 2em;
      font-family: 'Segoe Script', cursive;
      letter-spacing: 2px;
      box-shadow: 0 2px 14px #ff7eb942;
      user-select: none;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background: var(--nav);
      box-shadow: 0 1px 8px #ff7eb933;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .nav-btn {
      flex: 1;
      padding: 14px 0;
      font-size: 1.09em;
      color: var(--text);
      background: none;
      border: none;
      outline: none;
      cursor: pointer;
      letter-spacing: 1px;
      position: relative;
      transition: background 0.3s, color 0.3s;
      border-bottom: 3px solid transparent;
      font-family: inherit;
    }
    .nav-btn.active, .nav-btn:focus {
      color: var(--nav-active);
      border-bottom: 3px solid var(--nav-active);
      background: #fff7fb;
      z-index: 1;
      animation: navPop .45s;
    }
    .nav-btn:active:not(.active) {
      background: #ffe3f0;
    }
    @keyframes navPop {
      0% {transform: scale(0.9);}
      65% {transform: scale(1.12);}
      100% {transform: scale(1);}
    }
    main {
      flex: 1;
      max-width: 430px;
      margin: 28px auto 0 auto;
      background: #fff9fd;
      border-radius: 17px;
      box-shadow: 0 3px 42px #ff7eb91a, 0 2px 8px #fff8;
      padding: 33px 22px 22px 22px;
      min-height: 370px;
      position: relative;
    }
    h2 {
      text-align: center;
      color: var(--accent);
      font-family: 'Segoe Script', cursive;
      font-size: 1.42em;
      margin-top: 0;
      margin-bottom: 18px;
      letter-spacing: 1.5px;
      user-select: none;
    }
    /* Home */
    .flowers-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px,1fr));
      gap: 18px;
      margin: 17px 0 8px 0;
      justify-items: center;
    }
    .flower-card {
      background: var(--main);
      border-radius: 13px;
      box-shadow: 0 2px 12px #ff7eb92a;
      padding: 12px 7px 7px 7px;
      min-width: 180px;
      position: relative;
      transition: transform 0.4s cubic-bezier(.6,1.6,.6,.9), box-shadow 0.4s;
      cursor: pointer;
      text-align: center;
      font-size: 1em;
    }
    .flower-card:hover, .flower-card:focus {
      transform: translateY(-7px) scale(1.07) rotate(-2deg);
      box-shadow: 0 6px 22px #ff7eb941;
      z-index: 2;
      background: #fff7fb;
    }
    .flower-img {
      width: 145px;
      height: 105px;
      object-fit: cover;
      border-radius: 8px;
      display: block;
      margin: 0 auto 7px auto;
      box-shadow: 0 1px 6px #fff6;
      background: #fff5;
    }
    .flower-title {
      font-size: 1em;
      color: #b95081;
      font-weight: 600;
      margin-bottom: 2px;
    }
    /* Order Form */
    .order-form label {display:block; margin-bottom:4px; margin-top:10px;}
    .order-form input, .order-form textarea, .order-form select {
      width: 100%;
      padding: 8px 7px;
      border-radius: 6px;
      border: 1.2px solid #ffd6e3;
      margin-bottom: 8px;
      font-size: 1em;
      background: #fff;
      color: #7e4871;
      transition: border 0.2s;
    }
    .order-form input:focus, .order-form textarea:focus, .order-form select:focus {
      border: 1.2px solid var(--accent);
      outline: none;
    }
    .order-form button {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 11px 22px;
      font-size: 1.13em;
      font-weight: bold;
      cursor: pointer;
      margin: 9px 0 0 0;
      box-shadow: 0 1px 7px #fff2;
      transition: background 0.18s;
      display: block;
      width: 100%;
      letter-spacing: 1px;
    }
    .order-form button:hover { background: #f06292; }
    /* Orders Table */
    .orders-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background: #fff7fa;
      border-radius: 7px;
      overflow: hidden;
      font-size: 0.97em;
    }
    .orders-table th, .orders-table td {
      padding: 10px 7px;
      border-bottom: 1px solid #f8b6d255;
      text-align: left;
    }
    .orders-table th {
      background: #ffe3f0;
      color: #b95081;
    }
    .orders-table tr:last-child td { border-bottom: none; }
    .orders-table tr {
      transition: background 0.3s;
    }
    .orders-table tr:hover {
      background: #fff5;
    }
    /* About/Location */
    .about, .location {
      text-align: center;
      color: #b95081;
      font-size: 1.1em;
      margin: 17px 0;
    }
    /* Messenger btn */
    .messenger-btn {
      display: inline-block;
      background: #0084ff;
      color: #fff;
      border-radius: 8px;
      padding: 10px 24px;
      font-size: 1em;
      font-weight: bold;
      margin: 16px 0 0 0;
      cursor: pointer;
      text-decoration: none;
      box-shadow: 0 2px 9px #0084ff44;
      border: none;
      transition: background 0.21s;
      animation: btnPop 0.6s;
    }
    .messenger-btn:hover { background: #005be8; }
    @keyframes btnPop {
      0% {transform: scale(0.7);}
      65% {transform: scale(1.09);}
      100% {transform: scale(1);}
    }
    /* Img upload slot */
    .img-upload-slot {
      display: inline-block;
      border: 2px dashed #ff7eb9;
      border-radius: 8px;
      background: #fff7fb;
      width: 60px; height: 60px;
      overflow: hidden;
      margin-right: 8px;
      margin-bottom: 8px;
      position: relative;
      vertical-align: top;
    }
    .img-upload-slot input[type="file"] {
      opacity: 0;
      position: absolute; left: 0; top: 0; width: 100%; height: 100%; cursor: pointer;
    }
    .img-upload-slot img {
      width: 100%; height: 100%; object-fit: cover; border-radius: 8px;
    }
    /* Animations */
    .fade-in {
      animation: fadeIn .8s;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px);}
      to { opacity: 1; transform: none;}
    }
    /* Responsive */
    @media (max-width:600px) {
      main { max-width: 99vw; padding: 12px 2vw;}
      .flowers-grid { gap: 9px;}
      .flower-card { padding: 7px 3px 5px 3px; }
      .flower-img { width: 45px; height: 45px;}
    }
  </style>
</head>
<body>
  <header>Hnin Si PYo</header>
  <nav>
    <button class="nav-btn active" data-page="home">Home</button>
    <button class="nav-btn" data-page="orders">Orders</button>
    <button class="nav-btn" data-page="flowers">Flowers</button>
    <button class="nav-btn" data-page="location">Location</button>
    <button class="nav-btn" data-page="about">About</button>
  </nav>
  <main>
    <!-- Home -->
    <section class="page" id="page-home">
      <h2>Order Your Favorite Flowers</h2>
      <form class="order-form" id="orderForm" autocomplete="off">
        <label for="name">Your Name (နာမည်)</label>
        <input id="name" name="name" required maxlength="32">

        <label for="address">Address (နေရပ်လိပ်စာ)</label>
        <textarea id="address" name="address" required maxlength="120" rows="2"></textarea>

        <label for="flowerType">Flower Type (ပန်းအမျိုးအစား)</label>
        <select id="flowerType" name="flowerType" required>
          <option value="">-- Choose --</option>
          <option>Rose</option>
          <option>Lotus</option>
          <option>Sunflower</option>
          <option>Orchid</option>
          <option>Jasmine</option>
          <option>Tulip</option>
        </select>
        <div>
          <label>Upload Flower Image (optional):</label>
          <span class="img-upload-slot">
            <input type="file" accept="image/*" id="flowerImgInput" />
            <img id="flowerImgPreview" src="" style="display:none;">
          </span>
        </div>
        <button type="submit">Order Now</button>
      </form>
    </section>
    <!-- Orders -->
    <section class="page" id="page-orders" style="display:none;">
      <h2>Your Flower Orders</h2>
      <table class="orders-table" id="ordersTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Address</th>
            <th>Flower</th>
            <th>Date</th>
            <th>Img</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
    <!-- Flowers -->
    <section class="page" id="page-flowers" style="display:none;">
      <h2>Available Flowers</h2>
      <div class="flowers-grid" id="flowersGrid"></div>
    </section>
    <!-- Location -->
    <section class="page" id="page-location" style="display:none;">
      <h2>Flowers Seller Location</h2>
      <h1>Phone Number: <b>09-9197-1172</b></h1>
      <div class="location">
        <p>Thailand, Nonthatburi,Bang Bua Thong <br>Home Address:<b>65/133</b></p>
      </div>
      <a class="messenger-btn" href="https://www.facebook.com/share/15UkL4yJ1m/" target="_blank" rel="noopener">Contact via Messenger</a>
    </section>
    <!-- About -->
    <section class="page" id="page-about" style="display:none;">
      <h2>About Hnin Si PYo</h2>
      <div class="about">
        <p>Hnin Si PYo is your offline flower order app.<br>
        <b>ပန်းအမျိုးအစားစုံ၊ မြန်မြန်ဆန်ဆန်မှာယူနိုင်ပါသည်။</b></p>
        <b>Seller: War War Hlaing</b>
        <a class="messenger-btn" href="https://m.me/" target="_blank" rel="noopener">Contact via Messenger</a>
      </div>
    </section>
  </main>
  <script>
    // --- 1. Navigation logic with animation ---
    const navBtns = document.querySelectorAll('.nav-btn');
    const pages = document.querySelectorAll('.page');
    navBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        navBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const page = btn.getAttribute('data-page');
        pages.forEach(pg => {
          if (pg.id === 'page-' + page) {
            pg.style.display = '';
            pg.classList.remove('fade-in');
            void pg.offsetWidth; // force reflow
            pg.classList.add('fade-in');
          } else {
            pg.style.display = 'none';
            pg.classList.remove('fade-in');
          }
        });
      });
    });

    // --- 2. Flower Data (placeholder imgs) ---
    const flowerList = [
      {name:'Rose', img:'https://images.pexels.com/photos/931177/pexels-photo-931177.jpeg?auto=compress&w=70&h=70&fit=crop'},
      {name:'Lotus', img:'https://images.pexels.com/photos/356004/pexels-photo-356004.jpeg?auto=compress&w=70&h=70&fit=crop'},
      {name:'Sunflower', img:'https://images.pexels.com/photos/462118/pexels-photo-462118.jpeg?auto=compress&w=70&h=70&fit=crop'},
      {name:'Orchid', img:'https://images.pexels.com/photos/461382/pexels-photo-461382.jpeg?auto=compress&w=70&h=70&fit=crop'},
      {name:'Jasmine', img:'https://images.pexels.com/photos/145939/pexels-photo-145939.jpeg?auto=compress&w=70&h=70&fit=crop'},
      {name:'Tulip', img:'https://images.pexels.com/photos/36753/tulip-flower-yellow-flowers.jpg?auto=compress&w=70&h=70&fit=crop'},
    ];
    // Render flower cards
    function renderFlowers() {
      const grid = document.getElementById('flowersGrid');
      grid.innerHTML = '';
      flowerList.forEach(f => {
        const div = document.createElement('div');
        div.className = 'flower-card';
        div.tabIndex = 0;
        div.innerHTML = `<img class="flower-img" src="${f.img}" alt="${f.name}"><div class="flower-title">${f.name}</div>`;
        div.addEventListener('click', () => {
          // Animate card
          div.style.transform = 'scale(1.15) rotate(-14deg)';
          setTimeout(()=>{div.style.transform = '';}, 380);
          // Select in order form
          navBtns[0].click();
          setTimeout(()=>{
            document.getElementById('flowerType').value = f.name;
            document.getElementById('flowerType').focus();
          }, 100);
        });
        grid.appendChild(div);
      });
    }
    renderFlowers();

    // --- 3. Order Form Logic ---
    const orderForm = document.getElementById('orderForm');
    const flowerImgInput = document.getElementById('flowerImgInput');
    const flowerImgPreview = document.getElementById('flowerImgPreview');

    // Show preview
    flowerImgInput.addEventListener('change', e => {
      const f = e.target.files[0];
      if (f) {
        const reader = new FileReader();
        reader.onload = ev => {
          flowerImgPreview.src = ev.target.result;
          flowerImgPreview.style.display = '';
        };
        reader.readAsDataURL(f);
      } else {
        flowerImgPreview.src = '';
        flowerImgPreview.style.display = 'none';
      }
    });

    // --- Storage with 1 month expiry ---
    const STORAGE_KEY = 'hninsipyo_orders';
    const STORAGE_TIME_KEY = 'hninsipyo_time';

    // Auto-clear after 1 month
    function checkAndClearStorage() {
      const last = localStorage.getItem(STORAGE_TIME_KEY);
      const now = Date.now();
      if (last && now - parseInt(last) > 1000*60*60*24*31) {
        localStorage.removeItem(STORAGE_KEY);
        localStorage.setItem(STORAGE_TIME_KEY, now);
      }
      if (!last) localStorage.setItem(STORAGE_TIME_KEY, now);
    }
    checkAndClearStorage();

    function getOrders() {
      checkAndClearStorage();
      try {
        return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
      } catch(e) { return []; }
    }
    function saveOrder(order) {
      const orders = getOrders();
      orders.unshift(order);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(orders));
      localStorage.setItem(STORAGE_TIME_KEY, Date.now());
    }
    function deleteOrder(index) {
      let orders = getOrders();
      orders.splice(index, 1);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(orders));
      showOrders();
    }

    // --- 4. Order Form Submit ---
    orderForm.addEventListener('submit', function(e){
      e.preventDefault();
      const name = this.name.value.trim();
      const address = this.address.value.trim();
      const flowerType = this.flowerType.value.trim();
      if (!name || !address || !flowerType) return alert('Please fill all fields');
      let img = flowerImgPreview.src && flowerImgPreview.style.display!== 'none' ? flowerImgPreview.src : null;
      const order = {
        name,
        address,
        flowerType,
        date: new Date().toLocaleDateString(),
        img
      };
      saveOrder(order);
      this.reset();
      flowerImgPreview.src = '';
      flowerImgPreview.style.display = 'none';
      showOrders();
      // Animate btn
      this.querySelector('button[type="submit"]').style.background = '#ffe3f0';
      setTimeout(()=>{this.querySelector('button[type="submit"]').style.background = '';}, 300);
      // Go Orders tab
      navBtns[1].click();
    });


    // --- 5. Show Orders (with Delete functions) ---
    function showOrders() {
      const tbody = document.getElementById('ordersTable').querySelector('tbody');
      tbody.innerHTML = '';
      const orders = getOrders();
      if (!orders.length) {
        tbody.innerHTML = `<tr><td colspan="6" style="text-align:center;color:#bbb;">No orders yet</td></tr>`;
        return;
      }
      orders.forEach((o, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${o.name}</td>
          <td>${o.address}</td>
          <td>${o.flowerType}</td>
          <td>${o.date||''}</td>
          <td>${o.img ? `<img src="${o.img}" style="width:33px;height:33px;border-radius:6px;">` : ''}</td>
          <td><button class="delete-btn" title="Delete this order" onclick="deleteOrder(${idx})">🗑️</button></td>
        `;
        tbody.appendChild(tr);
      });
    }
    window.deleteOrder = deleteOrder; // expose for inline onclick
    showOrders();

    // --- Messenger btn animation ---
    document.querySelectorAll('.messenger-btn').forEach(btn=>{
      btn.addEventListener('click', e=>{
        btn.style.transform = 'scale(1.1)';
        setTimeout(()=>btn.style.transform='', 180);
      });
    });

    // --- On Orders page show, refresh table ---
    navBtns[1].addEventListener('click', showOrders);

    // --- Storage clear if more than 1 month on every visit ---
    window.addEventListener('focus', checkAndClearStorage);

    // --- For demo, auto Home on load ---
    navBtns[0].click();

  </script>
</body>
</html>